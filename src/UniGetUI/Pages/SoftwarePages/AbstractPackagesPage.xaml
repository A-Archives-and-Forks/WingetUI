<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="UniGetUI.Interface.AbstractPackagesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Toolkit="using:CommunityToolkit.WinUI.Controls"
    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
    xmlns:animations="using:CommunityToolkit.WinUI.Animations"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:UniGetUI.Interface"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pkgClasses="using:UniGetUI.PackageEngine.PackageClasses"
    xmlns:widgets="using:UniGetUI.Interface.Widgets"
    Name="ABSTRACT_PAGE"
    NavigationCacheMode="Required"
    mc:Ignorable="d">
    <!--  PreviewKeyDown="{x:Bind PackageList_PreviewKeyDown}"  -->

    <animations:Implicit.ShowAnimations>
        <animations:TranslationAnimation
            From="0,100,0"
            To="0"
            Duration="0:0:0.25" />
        <animations:OpacityAnimation
            From="0"
            To="1"
            Duration="0:0:0.25" />
    </animations:Implicit.ShowAnimations>


    <Page.Resources>
        <Style TargetType="AppBarButton">
            <Setter Property="Background" Value="{ThemeResource AppBarButtonBackground}" />
            <Setter Property="Foreground" Value="{ThemeResource AppBarButtonForeground}" />
            <Setter Property="BorderBrush" Value="{ThemeResource AppBarButtonBorderBrush}" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="Width" Value="48" />
            <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}" />
            <Setter Property="FocusVisualMargin" Value="-3" />
            <Setter Property="AllowFocusOnInteraction" Value="False" />
            <Setter Property="CornerRadius" Value="{ThemeResource ControlCornerRadius}" />
            <Setter Property="KeyboardAcceleratorPlacementMode" Value="Hidden" />
            <Setter Property="BackgroundSizing" Value="InnerBorderEdge" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="AppBarButton">
                        <Grid
                            x:Name="Root"
                            MinWidth="{TemplateBinding MinWidth}"
                            MaxWidth="{TemplateBinding MaxWidth}"
                            Background="Transparent">
                            <Border
                                x:Name="AppBarButtonInnerBorder"
                                Margin="{ThemeResource AppBarButtonInnerBorderMargin}"
                                Background="{TemplateBinding Background}"
                                BackgroundSizing="{TemplateBinding BackgroundSizing}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Control.IsTemplateFocusTarget="True"
                                CornerRadius="{TemplateBinding CornerRadius}">
                                <Border.BackgroundTransition>
                                    <BrushTransition Duration="0:0:0.083" />
                                </Border.BackgroundTransition>
                            </Border>
                            <Grid x:Name="ContentRoot" MinHeight="{ThemeResource AppBarThemeMinHeight}">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <Viewbox
                                    x:Name="ContentViewbox"
                                    Height="24"
                                    Margin="0,12,0,12"
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.AccessibilityView="Raw">
                                    <ContentPresenter
                                        x:Name="Content"
                                        Content="{TemplateBinding Icon}"
                                        Foreground="{TemplateBinding Foreground}"
                                        ToolTipService.ToolTip="{TemplateBinding Label}" />
                                </Viewbox>
                                <TextBlock
                                    x:Name="TextLabel"
                                    Grid.Row="1"
                                    Margin="0,0,0,0"
                                    AutomationProperties.AccessibilityView="Raw"
                                    FontFamily="{TemplateBinding FontFamily}"
                                    FontSize="12"
                                    Foreground="{TemplateBinding Foreground}"
                                    Text="{TemplateBinding Label}"
                                    TextAlignment="Center"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    x:Name="OverflowTextLabel"
                                    Margin="12,0,12,0"
                                    Padding="{ThemeResource AppBarButtonOverflowTextLabelPadding}"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Center"
                                    AutomationProperties.AccessibilityView="Raw"
                                    FontFamily="{TemplateBinding FontFamily}"
                                    FontSize="{ThemeResource ControlContentThemeFontSize}"
                                    Foreground="{TemplateBinding Foreground}"
                                    Text="{TemplateBinding Label}"
                                    TextAlignment="Left"
                                    TextTrimming="Clip"
                                    TextWrapping="NoWrap"
                                    Visibility="Collapsed" />
                                <TextBlock
                                    x:Name="KeyboardAcceleratorTextLabel"
                                    Grid.Column="1"
                                    MinWidth="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.KeyboardAcceleratorTextMinWidth}"
                                    Margin="24,0,12,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    AutomationProperties.AccessibilityView="Raw"
                                    Foreground="{ThemeResource AppBarButtonKeyboardAcceleratorTextForeground}"
                                    Style="{ThemeResource CaptionTextBlockStyle}"
                                    Text="{TemplateBinding KeyboardAcceleratorTextOverride}"
                                    Visibility="Collapsed" />
                                <Grid
                                    x:Name="SubItemChevronPanel"
                                    Grid.Column="2"
                                    Visibility="Collapsed">
                                    <FontIcon
                                        x:Name="SubItemChevron"
                                        Margin="{ThemeResource AppBarButtonSubItemChevronMargin}"
                                        VerticalAlignment="Top"
                                        AutomationProperties.AccessibilityView="Raw"
                                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                        FontSize="{ThemeResource AppBarButtonSubItemChevronFontSize}"
                                        Foreground="{ThemeResource AppBarButtonSubItemChevronForeground}"
                                        Glyph="{ThemeResource AppBarButtonFlyoutGlyph}"
                                        MirroredWhenRightToLeft="True" />
                                    <FontIcon
                                        x:Name="OverflowSubItemChevron"
                                        Margin="{ThemeResource AppBarButtonSecondarySubItemChevronMargin}"
                                        VerticalAlignment="Center"
                                        AutomationProperties.AccessibilityView="Raw"
                                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                        FontSize="{ThemeResource AppBarButtonSecondarySubItemChevronFontSize}"
                                        Foreground="{ThemeResource AppBarButtonSubItemChevronForeground}"
                                        Glyph="{ThemeResource AppBarButtonOverflowFlyoutGlyph}"
                                        MirroredWhenRightToLeft="True"
                                        Visibility="Collapsed" />
                                </Grid>

                            </Grid>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="ApplicationViewStates">
                                    <VisualState x:Name="FullSize" />
                                    <VisualState x:Name="Compact">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Margin" Value="{StaticResource AppBarButtonInnerBorderCompactMargin}" />

                                        </VisualState.Setters>

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="LabelOnRight">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentViewbox" Storyboard.TargetProperty="Margin">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="12,12,0,12" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot" Storyboard.TargetProperty="MinHeight">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AppBarThemeCompactHeight}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="(Grid.Row)">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="0" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="(Grid.Column)">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="1" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="TextAlignment">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Left" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Margin">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarButtonTextLabelOnRightMargin}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SubItemChevron" Storyboard.TargetProperty="Margin">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AppBarButtonSubItemChevronLabelOnRightMargin}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="LabelCollapsed">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot" Storyboard.TargetProperty="MinHeight">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AppBarThemeCompactHeight}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Overflow">
                                        <VisualState.Setters>
                                            <Setter Target="ContentRoot.MinHeight" Value="0" />
                                            <Setter Target="AppBarButtonInnerBorder.Margin" Value="{StaticResource AppBarButtonInnerBorderOverflowMargin}" />
                                            <Setter Target="ContentViewbox.Visibility" Value="Collapsed" />
                                            <Setter Target="TextLabel.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowTextLabel.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowWithToggleButtons">
                                        <VisualState.Setters>
                                            <Setter Target="ContentRoot.MinHeight" Value="0" />
                                            <Setter Target="AppBarButtonInnerBorder.Margin" Value="{StaticResource AppBarButtonInnerBorderOverflowMargin}" />
                                            <Setter Target="ContentViewbox.Visibility" Value="Collapsed" />
                                            <Setter Target="TextLabel.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowTextLabel.Visibility" Value="Visible" />
                                            <Setter Target="OverflowTextLabel.Margin" Value="38,0,12,0" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowWithMenuIcons">
                                        <VisualState.Setters>
                                            <Setter Target="ContentRoot.MinHeight" Value="0" />
                                            <Setter Target="AppBarButtonInnerBorder.Margin" Value="{StaticResource AppBarButtonInnerBorderOverflowMargin}" />
                                            <Setter Target="ContentViewbox.HorizontalAlignment" Value="Left" />
                                            <Setter Target="ContentViewbox.VerticalAlignment" Value="Center" />
                                            <Setter Target="ContentViewbox.Width" Value="24" />
                                            <Setter Target="ContentViewbox.Height" Value="24" />
                                            <Setter Target="ContentViewbox.Margin" Value="12,0,8,0" />
                                            <Setter Target="TextLabel.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowTextLabel.Visibility" Value="Visible" />
                                            <Setter Target="OverflowTextLabel.Margin" Value="38,0,12,0" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowWithToggleButtonsAndMenuIcons">
                                        <VisualState.Setters>
                                            <Setter Target="ContentRoot.MinHeight" Value="0" />
                                            <Setter Target="AppBarButtonInnerBorder.Margin" Value="{StaticResource AppBarButtonInnerBorderOverflowMargin}" />
                                            <Setter Target="ContentViewbox.HorizontalAlignment" Value="Left" />
                                            <Setter Target="ContentViewbox.VerticalAlignment" Value="Center" />
                                            <Setter Target="ContentViewbox.Width" Value="24" />
                                            <Setter Target="ContentViewbox.Height" Value="24" />
                                            <Setter Target="ContentViewbox.Margin" Value="34,0,8,0" />
                                            <Setter Target="TextLabel.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowTextLabel.Visibility" Value="Visible" />
                                            <Setter Target="OverflowTextLabel.Margin" Value="76,0,12,0" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />

                                    <VisualState x:Name="PointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPointerOver}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPointerOver}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundPointerOver}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundPointerOver}" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="Pressed">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPressed}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPressed}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundPressed}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundPressed}" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="Disabled">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundDisabled}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushDisabled}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundDisabled}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundDisabled}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundDisabled}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundDisabled}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundDisabled}" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowNormal">
                                        <VisualState.Setters>
                                            <Setter Target="SubItemChevron.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowSubItemChevron.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowPointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPointerOver}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPointerOver}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundPointerOver}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundPointerOver}" />
                                            <Setter Target="SubItemChevron.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowSubItemChevron.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowPressed">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPressed}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPressed}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundPressed}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundPressed}" />
                                            <Setter Target="SubItemChevron.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowSubItemChevron.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="OverflowSubMenuOpened">
                                        <VisualState.Setters>
                                            <Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundSubMenuOpened}" />
                                            <Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushSubMenuOpened}" />
                                            <Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundSubMenuOpened}" />
                                            <Setter Target="TextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundSubMenuOpened}" />
                                            <Setter Target="OverflowTextLabel.Foreground" Value="{ThemeResource AppBarButtonForegroundSubMenuOpened}" />
                                            <Setter Target="KeyboardAcceleratorTextLabel.Foreground" Value="{ThemeResource AppBarButtonKeyboardAcceleratorTextForegroundSubMenuOpened}" />
                                            <Setter Target="SubItemChevron.Foreground" Value="{ThemeResource AppBarButtonSubItemChevronForegroundSubMenuOpened}" />
                                            <Setter Target="SubItemChevron.Visibility" Value="Collapsed" />
                                            <Setter Target="OverflowSubItemChevron.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>
                                <VisualStateGroup x:Name="InputModeStates">
                                    <VisualState x:Name="InputModeDefault" />
                                    <VisualState x:Name="TouchInputMode">
                                        <VisualState.Setters>
                                            <Setter Target="OverflowTextLabel.Padding" Value="{ThemeResource AppBarButtonOverflowTextTouchMargin}" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="GameControllerInputMode">
                                        <VisualState.Setters>
                                            <Setter Target="OverflowTextLabel.Padding" Value="{ThemeResource AppBarButtonOverflowTextTouchMargin}" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>
                                <VisualStateGroup x:Name="KeyboardAcceleratorTextVisibility">
                                    <VisualState x:Name="KeyboardAcceleratorTextCollapsed" />
                                    <VisualState x:Name="KeyboardAcceleratorTextVisible">
                                        <VisualState.Setters>
                                            <Setter Target="KeyboardAcceleratorTextLabel.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FlyoutStates">
                                    <VisualState x:Name="NoFlyout" />
                                    <VisualState x:Name="HasFlyout">
                                        <VisualState.Setters>
                                            <Setter Target="SubItemChevronPanel.Visibility" Value="{ThemeResource AppBarButtonHasFlyoutChevronVisibility}" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>

                            </VisualStateManager.VisualStateGroups>
                        </Grid>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style BasedOn="{StaticResource DefaultListViewItemStyle}" TargetType="TreeViewItem">
            <Setter Property="Padding" Value="0" />
            <Setter Property="Background" Value="{ThemeResource TreeViewItemBackground}" />
            <Setter Property="BorderBrush" Value="{ThemeResource TreeViewItemBorderBrush}" />
            <Setter Property="BorderThickness" Value="{ThemeResource TreeViewItemBorderThemeThickness}" />
            <Setter Property="GlyphBrush" Value="{ThemeResource TreeViewItemForeground}" />
            <Setter Property="MinHeight" Value="{ThemeResource TreeViewItemMinHeight}" />
            <Setter Property="CornerRadius" Value="{ThemeResource ControlCornerRadius}" />
            <Setter Property="FocusVisualMargin" Value="0,-1,0,-1" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TreeViewItem">
                        <Grid
                            x:Name="ContentPresenterGrid"
                            Margin="{ThemeResource TreeViewItemPresenterMargin}"
                            Padding="{ThemeResource TreeViewItemPresenterPadding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <Rectangle
                                x:Name="SelectionIndicator"
                                Width="3"
                                Height="16"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Fill="{ThemeResource TreeViewItemSelectionIndicatorForeground}"
                                Opacity="0"
                                RadiusX="2"
                                RadiusY="2" />
                            <Grid
                                x:Name="MultiSelectGrid"
                                Margin="{ThemeResource TreeViewItemMultiSelectSelectedItemBorderMargin}"
                                Padding="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TreeViewItemTemplateSettings.Indentation}"
                                BorderBrush="Transparent"
                                BorderThickness="{ThemeResource TreeViewItemBorderThemeThickness}"
                                CornerRadius="{ThemeResource ControlCornerRadius}">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid Grid.Column="0">
                                    <CheckBox
                                        x:Name="MultiSelectCheckBox"
                                        Width="24"
                                        MinWidth="24"
                                        MinHeight="{ThemeResource TreeViewItemMultiSelectCheckBoxMinHeight}"
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        AutomationProperties.AccessibilityView="Raw"
                                        IsTabStop="False"
                                        Visibility="Collapsed" />
                                    <Border
                                        x:Name="MultiArrangeOverlayTextBorder"
                                        Height="20"
                                        MinWidth="20"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Background="{ThemeResource SystemControlBackgroundAccentBrush}"
                                        BorderBrush="{ThemeResource SystemControlBackgroundChromeWhiteBrush}"
                                        BorderThickness="1"
                                        CornerRadius="{ThemeResource ControlCornerRadius}"
                                        IsHitTestVisible="False"
                                        Visibility="Collapsed">
                                        <TextBlock
                                            x:Name="MultiArrangeOverlayText"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            AutomationProperties.AccessibilityView="Raw"
                                            Foreground="{ThemeResource SystemControlForegroundChromeWhiteBrush}"
                                            IsHitTestVisible="False"
                                            Style="{ThemeResource CaptionTextBlockStyle}"
                                            Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TreeViewItemTemplateSettings.DragItemsCount}" />
                                    </Border>
                                </Grid>
                                <Grid
                                    x:Name="ExpandCollapseChevron"
                                    Grid.Column="1"
                                    Width="20"
                                    Padding="0,0,0,0"
                                    Background="Transparent"
                                    Opacity="{TemplateBinding GlyphOpacity}">
                                    <TextBlock
                                        x:Name="CollapsedGlyph"
                                        Width="12"
                                        Height="12"
                                        Padding="2"
                                        VerticalAlignment="Center"
                                        AutomationProperties.AccessibilityView="Raw"
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        FontSize="{TemplateBinding GlyphSize}"
                                        Foreground="{TemplateBinding GlyphBrush}"
                                        IsHitTestVisible="False"
                                        IsTextScaleFactorEnabled="False"
                                        Text="{TemplateBinding CollapsedGlyph}"
                                        Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TreeViewItemTemplateSettings.CollapsedGlyphVisibility}" />
                                    <TextBlock
                                        x:Name="ExpandedGlyph"
                                        Width="12"
                                        Height="12"
                                        Padding="2"
                                        VerticalAlignment="Center"
                                        AutomationProperties.AccessibilityView="Raw"
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        FontSize="{TemplateBinding GlyphSize}"
                                        Foreground="{TemplateBinding GlyphBrush}"
                                        IsHitTestVisible="False"
                                        IsTextScaleFactorEnabled="False"
                                        Text="{TemplateBinding ExpandedGlyph}"
                                        Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TreeViewItemTemplateSettings.ExpandedGlyphVisibility}" />
                                </Grid>
                                <ContentPresenter
                                    x:Name="ContentPresenter"
                                    Grid.Column="2"
                                    MinHeight="{ThemeResource TreeViewItemContentHeight}"
                                    Margin="{TemplateBinding Padding}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                    ContentTransitions="{TemplateBinding ContentTransitions}" />

                            </Grid>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />

                                    <VisualState x:Name="PointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="ContentPresenterGrid.Background" Value="{ThemeResource TreeViewItemBackgroundPointerOver}" />
                                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TreeViewItemForegroundPointerOver}" />
                                            <Setter Target="SelectionIndicator.Fill" Value="{ThemeResource TreeViewItemSelectionIndicatorForegroundPointerOver}" />
                                            <Setter Target="CollapsedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundPointerOver}" />
                                            <Setter Target="ExpandedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundPointerOver}" />
                                            <Setter Target="ContentPresenterGrid.BorderBrush" Value="{ThemeResource TreeViewItemBorderBrushPointerOver}" />
                                            <Setter Target="SelectionIndicator.Opacity" Value="0" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="Pressed">
                                        <VisualState.Setters>
                                            <Setter Target="ContentPresenterGrid.Background" Value="{ThemeResource TreeViewItemBackgroundPressed}" />
                                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TreeViewItemForegroundPressed}" />
                                            <Setter Target="SelectionIndicator.Fill" Value="{ThemeResource TreeViewItemSelectionIndicatorForegroundPressed}" />
                                            <Setter Target="CollapsedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundPressed}" />
                                            <Setter Target="ExpandedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundPressed}" />
                                            <Setter Target="ContentPresenterGrid.BorderBrush" Value="{ThemeResource TreeViewItemBorderBrushPressed}" />
                                            <Setter Target="SelectionIndicator.Opacity" Value="0" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="Selected">
                                        <VisualState.Setters>
                                            <Setter Target="ContentPresenterGrid.Background" Value="{ThemeResource TreeViewItemBackgroundSelected}" />
                                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TreeViewItemForegroundSelected}" />
                                            <Setter Target="SelectionIndicator.Fill" Value="{ThemeResource TreeViewItemSelectionIndicatorForeground}" />
                                            <Setter Target="CollapsedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelected}" />
                                            <Setter Target="ExpandedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelected}" />
                                            <Setter Target="ContentPresenterGrid.BorderBrush" Value="{ThemeResource TreeViewItemBorderBrushSelected}" />
                                            <Setter Target="SelectionIndicator.Opacity" Value="1" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="PointerOverSelected">
                                        <VisualState.Setters>
                                            <Setter Target="ContentPresenterGrid.Background" Value="{ThemeResource TreeViewItemBackgroundSelectedPointerOver}" />
                                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPointerOver}" />
                                            <Setter Target="SelectionIndicator.Fill" Value="{ThemeResource TreeViewItemSelectionIndicatorForegroundPointerOver}" />
                                            <Setter Target="CollapsedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPointerOver}" />
                                            <Setter Target="ExpandedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPointerOver}" />
                                            <Setter Target="ContentPresenterGrid.BorderBrush" Value="{ThemeResource TreeViewItemBorderBrushSelectedPointerOver}" />
                                            <Setter Target="SelectionIndicator.Opacity" Value="1" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="PressedSelected">
                                        <VisualState.Setters>
                                            <Setter Target="ContentPresenterGrid.Background" Value="{ThemeResource TreeViewItemBackgroundSelectedPressed}" />
                                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPressed}" />
                                            <Setter Target="SelectionIndicator.Fill" Value="{ThemeResource TreeViewItemSelectionIndicatorForegroundPressed}" />
                                            <Setter Target="CollapsedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPressed}" />
                                            <Setter Target="ExpandedGlyph.Foreground" Value="{ThemeResource TreeViewItemForegroundSelectedPressed}" />
                                            <Setter Target="ContentPresenterGrid.BorderBrush" Value="{ThemeResource TreeViewItemBorderBrushSelectedPressed}" />
                                            <Setter Target="SelectionIndicator.Opacity" Value="1" />

                                        </VisualState.Setters>
                                    </VisualState>

                                    <VisualState x:Name="ReorderedPlaceholder">

                                        <Storyboard>
                                            <FadeOutThemeAnimation TargetName="MultiSelectGrid" />
                                        </Storyboard>
                                    </VisualState>

                                </VisualStateGroup>
                                <VisualStateGroup x:Name="TreeViewMultiSelectStates">
                                    <VisualState x:Name="TreeViewMultiSelectDisabled" />
                                    <VisualState x:Name="TreeViewMultiSelectEnabledUnselected">
                                        <VisualState.Setters>
                                            <Setter Target="MultiSelectCheckBox.Visibility" Value="Visible" />
                                            <Setter Target="ExpandCollapseChevron.Padding" Value="0,0,0,0" />
                                            <Setter Target="ContentPresenterGrid.Padding" Value="0" />

                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="TreeViewMultiSelectEnabledSelected">
                                        <VisualState.Setters>
                                            <Setter Target="MultiSelectCheckBox.Visibility" Value="Visible" />
                                            <Setter Target="MultiSelectGrid.Background" Value="{ThemeResource TreeViewItemBackground}" />
                                            <Setter Target="MultiSelectGrid.BorderBrush" Value="{ThemeResource TreeViewItemMultiSelectBorderBrushSelected}" />
                                            <Setter Target="ExpandCollapseChevron.Padding" Value="0,0,0,0" />
                                            <Setter Target="ContentPresenterGrid.Padding" Value="0" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>

                                <VisualStateGroup x:Name="DragStates">
                                    <VisualState x:Name="NotDragging" />

                                    <VisualState x:Name="MultipleDraggingPrimary">
                                        <VisualState.Setters>
                                            <Setter Target="MultiSelectCheckBox.Opacity" Value="0" />
                                            <Setter Target="MultiArrangeOverlayTextBorder.Visibility" Value="Visible" />

                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>

                            </VisualStateManager.VisualStateGroups>
                        </Grid>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <DataTemplate x:Key="PackageTemplate" x:DataType="pkgClasses:PackageWrapper">
            <widgets:PackageItemContainer
                AutomationProperties.Name="{x:Bind Package.AutomationName}"
                CornerRadius="4"
                DoubleTapped="PackageItemContainer_DoubleTapped"
                Package="{x:Bind Package}"
                PreviewKeyDown="PackageItemContainer_PreviewKeyDown"
                RightTapped="PackageItemContainer_RightTapped"
                Wrapper="{x:Bind Self}">

                <Grid
                    Padding="12,3,8,3"
                    ColumnSpacing="5"
                    Opacity="{x:Bind ListedOpacity, Mode=OneWay}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="*" MinWidth="100" />
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="*" MinWidth="100" />
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="*" MaxWidth="125" />
                        <ColumnDefinition Width="24" MaxWidth="{x:Bind NewVersionIconWidth}" />
                        <ColumnDefinition Width="*" MaxWidth="{x:Bind NewVersionLabelWidth}" />
                        <ColumnDefinition Width="24" />
                        <ColumnDefinition Width="*" MaxWidth="150" />
                    </Grid.ColumnDefinitions>
                    <CheckBox
                        Grid.Row="0"
                        Grid.Column="0"
                        VerticalAlignment="Center"
                        IsChecked="{x:Bind IsChecked, Mode=TwoWay}" />

                    <!--  Regular or package icon  -->
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        FontSize="24"
                        FontWeight="ExtraLight"
                        Icon="Package"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                        Visibility="{x:Bind ShowDefaultPackageIcon, Mode=OneWay}" />
                    <Image
                        Grid.Row="0"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        Source="{x:Bind MainIconSource, Mode=OneWay}"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                        Visibility="{x:Bind ShowCustomPackageIcon, Mode=OneWay}" />

                    <!--  Package tag icon  -->
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="1"
                        Width="20"
                        Height="20"
                        Margin="0,0,-4,-2"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        FontSize="20"
                        FontWeight="ExtraLight"
                        Foreground="{ThemeResource AccentAAFillColorTertiaryBrush}"
                        Icon="{x:Bind AlternateIconId, Mode=OneWay}"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                        Visibility="{x:Bind AlternateIdIconVisible, Mode=OneWay}" />
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="1"
                        Width="20"
                        Height="20"
                        Margin="0,0,-4,-2"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        FontSize="20"
                        FontWeight="ExtraLight"
                        Icon="{x:Bind MainIconId, Mode=OneWay}"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                        Visibility="{x:Bind AlternateIdIconVisible, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="2"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="13"
                        Text="{x:Bind Package.Name}"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}" />
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="3"
                        VerticalAlignment="Center"
                        FontSize="24"
                        FontWeight="ExtraLight"
                        Icon="Id"
                        ToolTipService.ToolTip="{x:Bind Package.Id}" />
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="4"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="13"
                        Text="{x:Bind Package.Id}"
                        ToolTipService.ToolTip="{x:Bind Package.Id}" />
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="5"
                        VerticalAlignment="Center"
                        FontSize="24"
                        FontWeight="ExtraLight"
                        Icon="version"
                        ToolTipService.ToolTip="{x:Bind Package.VersionString}" />
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="6"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="13"
                        Text="{x:Bind Package.VersionString, Mode=OneWay}"
                        ToolTipService.ToolTip="{x:Bind Package.VersionString}" />
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="7"
                        VerticalAlignment="Center"
                        FontSize="24"
                        FontWeight="ExtraLight"
                        Icon="download"
                        ToolTipService.ToolTip="{x:Bind Package.NewVersionString}"
                        Visibility="{x:Bind Package.IsUpgradable}" />
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="8"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="13"
                        Text="{x:Bind Package.NewVersionString}"
                        ToolTipService.ToolTip="{x:Bind Package.NewVersionString}"
                        Visibility="{x:Bind Package.IsUpgradable}" />
                    <widgets:LocalIcon
                        Grid.Row="0"
                        Grid.Column="9"
                        VerticalAlignment="Center"
                        FontSize="24"
                        FontWeight="ExtraLight"
                        Icon="{x:Bind Package.Source.IconId}"
                        ToolTipService.ToolTip="{x:Bind Package.Source.AsString_DisplayName}" />
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="10"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="13"
                        Text="{x:Bind Package.Source.AsString_DisplayName}"
                        ToolTipService.ToolTip="{x:Bind Package.Source.AsString_DisplayName}" />
                </Grid>
            </widgets:PackageItemContainer>
        </DataTemplate>

        <DataTemplate x:Key="PackageTemplate_Grid" x:DataType="pkgClasses:PackageWrapper">
            <widgets:PackageItemContainer
                AutomationProperties.Name="{x:Bind Package.AutomationName}"
                Background="{ThemeResource ControlFillColorDefaultBrush}"
                CornerRadius="4"
                DoubleTapped="PackageItemContainer_DoubleTapped"
                Package="{x:Bind Package}"
                PreviewKeyDown="PackageItemContainer_PreviewKeyDown"
                RightTapped="PackageItemContainer_RightTapped"
                Wrapper="{x:Bind Self}">

                <Grid
                    Padding="4,4,4,4"
                    ColumnSpacing="4"
                    Opacity="{x:Bind ListedOpacity, Mode=OneWay}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" MinWidth="200" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Regular or package icon  -->
                    <Grid
                        Grid.Row="0"
                        Grid.RowSpan="3"
                        Grid.Column="0"
                        Width="48"
                        Height="48">
                        <widgets:LocalIcon
                            Grid.Row="0"
                            Grid.RowSpan="3"
                            Grid.Column="0"
                            Margin="-4,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="48"
                            FontWeight="ExtraLight"
                            Icon="Package"
                            ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                            Visibility="{x:Bind ShowDefaultPackageIcon, Mode=OneWay}" />

                        <Image
                            Width="48"
                            Height="48"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Source="{x:Bind MainIconSource, Mode=OneWay}"
                            ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                            Visibility="{x:Bind ShowCustomPackageIcon, Mode=OneWay}" />

                        <widgets:LocalIcon
                            Grid.Row="0"
                            Grid.Column="1"
                            Width="30"
                            Height="30"
                            Margin="0,0,-4,-2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            FontSize="30"
                            FontWeight="ExtraLight"
                            Foreground="{ThemeResource AccentAAFillColorTertiaryBrush}"
                            Icon="{x:Bind AlternateIconId, Mode=OneWay}"
                            ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                            Visibility="{x:Bind AlternateIdIconVisible, Mode=OneWay}" />

                        <widgets:LocalIcon
                            Grid.Row="0"
                            Grid.Column="1"
                            Width="30"
                            Height="30"
                            Margin="0,0,-4,-2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            FontSize="30"
                            FontWeight="ExtraLight"
                            Icon="{x:Bind MainIconId, Mode=OneWay}"
                            ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}"
                            Visibility="{x:Bind AlternateIdIconVisible, Mode=OneWay}" />

                    </Grid>

                    <StackPanel
                        Grid.Row="0"
                        Grid.RowSpan="3"
                        Grid.Column="2"
                        Width="24"
                        Orientation="Vertical">
                        <CheckBox
                            Margin="2,-4,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            IsChecked="{x:Bind IsChecked, Mode=TwoWay}" />
                        <Button
                            Width="24"
                            Height="24"
                            Margin="0"
                            Padding="0"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="PackageItemContainer_RightTapped">
                            <SymbolIcon Symbol="More" />
                        </Button>
                    </StackPanel>
                    <!--  Package tag icon  -->

                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Text="{x:Bind Package.Name}"
                        ToolTipService.ToolTip="{x:Bind ListedNameTooltip, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="1"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="11"
                        Opacity="0.8"
                        Text="{x:Bind Package.Id}"
                        ToolTipService.ToolTip="{x:Bind Package.Id}" />

                    <TextBlock
                        Grid.Row="2"
                        Grid.Column="1"
                        FontFamily="Segoe UI Variable Text"
                        FontSize="11"
                        Opacity="0.5"
                        Text="{x:Bind VersionComboString, Mode=OneWay}"
                        ToolTipService.ToolTip="{x:Bind Package.VersionString}" />

                </Grid>
            </widgets:PackageItemContainer>
        </DataTemplate>
    </Page.Resources>

    <Grid Padding="0" BorderThickness="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="1000000*" MaxWidth="2000" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  HEADER  -->
        <Grid
            Name="MainHeader"
            Grid.Row="0"
            Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" MaxWidth="390" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" MinHeight="16" />
                <RowDefinition Height="Auto" MinHeight="24" />
                <RowDefinition Height="Auto" MinHeight="24" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <FontIcon
                x:Name="HeaderIcon"
                Grid.Row="0"
                Grid.RowSpan="3"
                Grid.Column="0"
                Width="60"
                MinHeight="60"
                FontSize="50"
                FontWeight="Normal" />
            <TextBlock
                x:Name="MainTitle"
                Grid.Row="0"
                Grid.RowSpan="2"
                Grid.Column="1"
                MinHeight="48"
                HorizontalAlignment="Left"
                x:FieldModifier="protected"
                FontFamily="Segoe UI Variable Display"
                FontSize="30"
                FontWeight="Bold"
                TextWrapping="Wrap" />
            <TextBlock
                x:Name="MainSubtitle"
                Grid.Row="2"
                Grid.Column="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                x:FieldModifier="protected"
                FontSize="11"
                FontWeight="Normal"
                Foreground="{ThemeResource AppBarItemDisabledForegroundThemeBrush}"
                TextWrapping="Wrap" />
            <Grid
                Grid.Row="0"
                Grid.RowSpan="3"
                Grid.Column="2"
                HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox
                    x:Name="QueryBlock"
                    Grid.Column="1"
                    Height="30"
                    Padding="7,5,5,5"
                    VerticalContentAlignment="Center"
                    x:FieldModifier="protected"
                    CornerRadius="4,0,0,4" />

                <Button
                    x:Name="FindButton"
                    Grid.Column="2"
                    Width="32"
                    Height="32"
                    Padding="4"
                    x:FieldModifier="protected"
                    AutomationProperties.HelpText="Search"
                    CornerRadius="0,4,4,0">
                    <AnimatedIcon>
                        <AnimatedIcon.Source>
                            <animatedvisuals:AnimatedFindVisualSource />
                        </AnimatedIcon.Source>
                        <AnimatedIcon.FallbackIconSource>
                            <SymbolIconSource Symbol="Find" />
                        </AnimatedIcon.FallbackIconSource>
                    </AnimatedIcon>
                </Button>
                <Button
                    x:Name="ReloadButton"
                    Grid.Column="3"
                    Width="32"
                    Height="32"
                    Margin="6,0,4,0"
                    Padding="0"
                    x:FieldModifier="protected"
                    AutomationProperties.HelpText="Reload packages"
                    CornerRadius="4">
                    <FontIcon FontSize="16" Glyph="&#xE72C;" />
                </Button>
            </Grid>

            <Grid
                Grid.Row="3"
                Grid.Column="0"
                Grid.ColumnSpan="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <ToggleButton
                    x:Name="ToggleFiltersButton"
                    Grid.Column="0"
                    Height="36"
                    Margin="1,4"
                    Padding="8,4"
                    x:FieldModifier="protected"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    Click="ToggleFiltersButton_Click"
                    CornerRadius="4">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon FontSize="22" Glyph="&#xE71C;" />
                        <widgets:TranslatedTextBlock Text="Filters" />
                    </StackPanel>
                </ToggleButton>

                <CommandBar
                    Name="ToolBar"
                    Grid.Column="2"
                    HorizontalAlignment="Stretch"
                    x:FieldModifier="protected"
                    DefaultLabelPosition="Right" />
            </Grid>
        </Grid>


        <!--  NON-HEADER CONTENT  -->

        <!--  FILTERING PANE  -->

        <SplitView
            Name="FilteringPanel"
            Grid.Row="2"
            Grid.Column="1"
            BorderThickness="0"
            CornerRadius="0,0,0,0"
            DisplayMode="Inline"
            PaneBackground="Transparent"
            PaneClosing="FilteringPanel_PaneClosing"
            PanePlacement="Left"
            SizeChanged="FilteringPanel_SizeChanged">
            <SplitView.Pane>
                <ScrollViewer
                    Name="SidePanel"
                    Grid.Row="1"
                    Grid.Column="0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    BorderBrush="{ThemeResource AccentAAFillColorDefaultBrush}"
                    CornerRadius="0,8,8,0"
                    HorizontalScrollMode="Disabled"
                    SizeChanged="SidepanelWidth_SizeChanged">
                    <Grid Name="SidePanelGrid" RowSpacing="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!--  Sources Expander  -->
                        <Expander
                            Grid.Row="0"
                            Grid.Column="0"
                            Padding="4,4,4,8"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            AutomationProperties.Name="Filter by sources"
                            Background="{ThemeResource SystemFillColorNeutralBackgroundBrush}"
                            CornerRadius="8"
                            IsExpanded="True">
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="20" Glyph="&#xE74C;" />
                                    <widgets:TranslatedTextBlock
                                        VerticalAlignment="Center"
                                        FontWeight="SemiBold"
                                        Text="Sources" />
                                </StackPanel>
                            </Expander.Header>
                            <Expander.Content>
                                <StackPanel Orientation="Vertical">
                                    <widgets:TranslatedTextBlock
                                        x:Name="SourcesPlaceholderText"
                                        MinHeight="60"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        FontSize="15"
                                        FontWeight="Bold"
                                        Opacity="0.5"
                                        Text="Search for packages to start"
                                        WrappingMode="Wrap" />
                                    <Grid
                                        Name="SourcesTreeViewGrid"
                                        HorizontalAlignment="Stretch"
                                        ColumnSpacing="4"
                                        RowSpacing="4"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <HyperlinkButton
                                            Name="SelectAllSourcesButton"
                                            Grid.Column="0"
                                            Padding="2"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Center"
                                            Click="SelectAllSourcesButton_Click">
                                            <widgets:TranslatedTextBlock
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                Text="Select all" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            Name="ClearSourceSelectionButton"
                                            Grid.Column="1"
                                            Padding="2"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Center"
                                            Click="ClearSourceSelectionButton_Click">
                                            <widgets:TranslatedTextBlock
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                Text="Clear selection" />
                                        </HyperlinkButton>
                                        <TreeView
                                            Name="SourcesTreeView"
                                            Grid.Row="1"
                                            Grid.Column="0"
                                            Grid.ColumnSpan="2"
                                            Padding="0"
                                            HorizontalAlignment="Stretch"
                                            SelectionChanged="SourcesTreeView_SelectionChanged"
                                            SelectionMode="Multiple" />
                                    </Grid>

                                </StackPanel>
                            </Expander.Content>
                        </Expander>
                        <!--  Filter Options Expander  -->
                        <Expander
                            Grid.Row="1"
                            Grid.Column="0"
                            Padding="16,8,16,8"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            AutomationProperties.Name="Filter options"
                            Background="{ThemeResource SystemFillColorNeutralBackgroundBrush}"
                            CornerRadius="8"
                            IsExpanded="False">
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="20" Glyph="&#xE71C;" />
                                    <widgets:TranslatedTextBlock
                                        VerticalAlignment="Center"
                                        FontWeight="SemiBold"
                                        Text="Filters" />
                                </StackPanel>
                            </Expander.Header>
                            <Expander.Content>
                                <StackPanel
                                    HorizontalAlignment="Stretch"
                                    Orientation="Vertical"
                                    Spacing="0">
                                    <CheckBox
                                        x:Name="InstantSearchCheckbox"
                                        x:FieldModifier="protected"
                                        Checked="InstantSearchValueChanged"
                                        Unchecked="InstantSearchValueChanged">
                                        <CheckBox.Content>
                                            <widgets:TranslatedTextBlock Text="Instant search" WrappingMode="Wrap" />
                                        </CheckBox.Content>
                                    </CheckBox>
                                    <CheckBox
                                        x:Name="UpperLowerCaseCheckbox"
                                        Checked="FilterOptionsChanged"
                                        Unchecked="FilterOptionsChanged">
                                        <CheckBox.Content>
                                            <widgets:TranslatedTextBlock Text="Distinguish between uppercase and lowercase" WrappingMode="Wrap" />
                                        </CheckBox.Content>
                                    </CheckBox>
                                    <CheckBox
                                        x:Name="IgnoreSpecialCharsCheckbox"
                                        Checked="FilterOptionsChanged"
                                        IsChecked="True"
                                        Unchecked="FilterOptionsChanged">
                                        <CheckBox.Content>
                                            <widgets:TranslatedTextBlock Text="Ignore special characters" WrappingMode="Wrap" />
                                        </CheckBox.Content>
                                    </CheckBox>
                                </StackPanel>
                            </Expander.Content>
                        </Expander>
                        <!--  Search mode expander  -->
                        <Expander
                            Grid.Row="2"
                            Grid.Column="0"
                            Padding="16,8,16,8"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            AutomationProperties.Name="Search mode"
                            Background="{ThemeResource SystemFillColorNeutralBackgroundBrush}"
                            CornerRadius="8"
                            IsExpanded="True">
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="20" Glyph="&#xE773;" />
                                    <widgets:TranslatedTextBlock
                                        VerticalAlignment="Center"
                                        FontWeight="SemiBold"
                                        Text="Search mode" />
                                </StackPanel>
                            </Expander.Header>
                            <Expander.Content>
                                <StackPanel
                                    HorizontalAlignment="Stretch"
                                    Orientation="Vertical"
                                    Spacing="0">
                                    <RadioButtons
                                        Name="QueryOptionsGroup"
                                        Margin="0,-4,0,6"
                                        x:FieldModifier="protected"
                                        CharacterSpacing="0"
                                        SelectionChanged="FilterOptionsChanged">
                                        <RadioButton
                                            x:Name="QueryNameRadio"
                                            Height="30"
                                            Margin="0,-2,0,-2"
                                            x:FieldModifier="protected">
                                            <RadioButton.Content>
                                                <widgets:TranslatedTextBlock Text="Package Name" WrappingMode="Wrap" />
                                            </RadioButton.Content>
                                        </RadioButton>
                                        <RadioButton
                                            x:Name="QueryIdRadio"
                                            Height="30"
                                            Margin="0,-2,0,-2"
                                            x:FieldModifier="protected">
                                            <RadioButton.Content>
                                                <widgets:TranslatedTextBlock Text="Package ID" WrappingMode="Wrap" />
                                            </RadioButton.Content>
                                        </RadioButton>
                                        <RadioButton
                                            x:Name="QueryBothRadio"
                                            Height="30"
                                            Margin="0,-2,0,-2"
                                            x:FieldModifier="protected"
                                            IsChecked="True">
                                            <RadioButton.Content>
                                                <widgets:TranslatedTextBlock Text="Both" WrappingMode="Wrap" />
                                            </RadioButton.Content>
                                        </RadioButton>
                                        <RadioButton
                                            x:Name="QueryExactMatch"
                                            Height="30"
                                            Margin="0,-2,0,-2"
                                            x:FieldModifier="protected">
                                            <RadioButton.Content>
                                                <widgets:TranslatedTextBlock Text="Exact match" WrappingMode="Wrap" />
                                            </RadioButton.Content>
                                        </RadioButton>
                                        <RadioButton
                                            x:Name="QuerySimilarResultsRadio"
                                            Height="30"
                                            Margin="0,-2,0,-2"
                                            x:FieldModifier="protected">
                                            <RadioButton.Content>
                                                <widgets:TranslatedTextBlock Text="Show similar packages" WrappingMode="Wrap" />
                                            </RadioButton.Content>
                                        </RadioButton>
                                    </RadioButtons>
                                </StackPanel>
                            </Expander.Content>
                        </Expander>
                    </Grid>
                </ScrollViewer>
            </SplitView.Pane>
            <Grid Name="PackagesListGrid" Margin="0">
                <ProgressBar
                    x:Name="LoadingProgressBar"
                    Margin="1,-6,1,0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Top"
                    x:FieldModifier="protected"
                    IsIndeterminate="True"
                    Visibility="Visible" />

                <!--  ACTUAL PACKAGE LIST  -->
                <Grid
                    Padding="4,6,4,6"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="{ThemeResource SystemFillColorNeutralBackgroundBrush}"
                    BorderBrush="{StaticResource ExpanderContentBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="37" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid
                        Grid.Row="0"
                        Margin="4,2,4,5"
                        ColumnSpacing="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="8" />
                            <ColumnDefinition Width="32" />
                            <ColumnDefinition Width="28" />
                            <ColumnDefinition Width="*" MinWidth="100" />
                            <ColumnDefinition Width="32" />
                            <ColumnDefinition Width="*" MinWidth="100" />
                            <ColumnDefinition Width="32" />
                            <ColumnDefinition Width="*" MaxWidth="125" />
                            <ColumnDefinition Width="32" MaxWidth="{x:Bind NewVersionIconWidth}" />
                            <ColumnDefinition Width="*" MaxWidth="{x:Bind NewVersionLabelWidth}" />
                            <ColumnDefinition Width="32" />
                            <ColumnDefinition Width="*" MaxWidth="150" />
                            <ColumnDefinition Width="11" />
                        </Grid.ColumnDefinitions>
                        <Button
                            Name="CheckboxHeader"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Padding="0"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="4,0,0,4">
                            <CheckBox
                                Name="SelectAllCheckBox"
                                Margin="12,4,4,4"
                                Checked="SelectAllCheckBox_ValueChanged"
                                Unchecked="SelectAllCheckBox_ValueChanged" />
                        </Button>
                        <Button
                            Name="NameHeader"
                            Grid.Column="3"
                            Grid.ColumnSpan="1"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="0" />
                        <Button
                            Name="IdHeader"
                            Grid.Column="4"
                            Grid.ColumnSpan="2"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="0" />
                        <Button
                            Name="VersionHeader"
                            Grid.Column="6"
                            Grid.ColumnSpan="2"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="0" />
                        <Button
                            Name="NewVersionHeader"
                            Grid.Column="8"
                            Grid.ColumnSpan="2"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="0"
                            Visibility="{x:Bind RoleIsUpdateLike}" />
                        <Button
                            Name="SourceHeader"
                            Grid.Column="10"
                            Grid.ColumnSpan="3"
                            HorizontalAlignment="Stretch"
                            BorderThickness="0"
                            CornerRadius="0,4,4,0" />
                    </Grid>

                    <ItemsView
                        x:Name="PackageList"
                        Grid.Row="1"
                        Padding="4,0,4,0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        x:FieldModifier="protected"
                        CanBeScrollAnchor="False"
                        CharacterReceived="{x:Bind PackageList_CharacterReceived}"
                        ItemTemplate="{StaticResource PackageTemplate_Grid}"
                        ItemsSource="{x:Bind FilteredPackages, Mode=OneWay}">
                        <ItemsView.Layout>
                            <UniformGridLayout MinColumnSpacing="8" MinRowSpacing="8" ItemsStretch="Fill" />
                        </ItemsView.Layout>
                    </ItemsView>

                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <TextBlock
                            x:Name="BackgroundText"
                            Grid.Row="1"
                            Grid.Column="1"
                            VerticalAlignment="Center"
                            FontFamily="Segoe UI Variable Display"
                            FontSize="30"
                            FontWeight="Bold"
                            Opacity="0.5"
                            Text="Hello World Lorem Ipsum dolor sit amet"
                            TextAlignment="Center"
                            TextWrapping="Wrap" />
                    </Grid>

                </Grid>

                <!--  Filters/Packages Splitter  -->
                <Toolkit:PropertySizer
                    x:Name="FiltersResizer"
                    Width="12"
                    Margin="-12,0,0,0"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Left"
                    Binding="{x:Bind FilteringPanel.OpenPaneLength, Mode=TwoWay}"
                    CornerRadius="2"
                    Visibility="{x:Bind FilteringPanel.IsPaneOpen, Mode=OneWay}">
                    <Toolkit:PropertySizer.RenderTransform>
                        <TranslateTransform X="0" />
                    </Toolkit:PropertySizer.RenderTransform>
                </Toolkit:PropertySizer>


                <!--  MEGA QUERY BLOCK  -->
                <Grid
                    x:Name="MegaQueryBlockGrid"
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    x:FieldModifier="protected"
                    Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="80" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="8*" MaxWidth="800" />
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TextBox
                        x:Name="MegaQueryBlock"
                        Grid.Row="1"
                        Grid.Column="1"
                        Padding="20,11,10,11"
                        x:FieldModifier="protected"
                        CornerRadius="8,0,0,8"
                        FontSize="40"
                        FontWeight="SemiBold" />
                    <Button
                        x:Name="MegaFindButton"
                        Grid.Row="1"
                        Grid.Column="2"
                        Width="80"
                        Height="80"
                        Padding="12"
                        x:FieldModifier="protected"
                        AutomationProperties.HelpText="Search"
                        CornerRadius="0,8,8,0">
                        <AnimatedIcon>
                            <AnimatedIcon.Source>
                                <animatedvisuals:AnimatedFindVisualSource />
                            </AnimatedIcon.Source>
                            <AnimatedIcon.FallbackIconSource>
                                <SymbolIconSource Symbol="Find" />
                            </AnimatedIcon.FallbackIconSource>
                        </AnimatedIcon>
                    </Button>

                </Grid>
            </Grid>
        </SplitView>
    </Grid>
</Page>
